CREATE TABLE postac(id_postaci INT PRIMARY KEY AUTO_INCREMENT, nazwa VARCHAR(40) NOT NULL, rodzaj ENUM('wiking','ptak','kobieta'), data_urodzenia DATE NOT NULL, wiek INT UNSIGNED);
INSERT INTO postac VALUES(1,'Bjorn','wiking','1970-10-11','51');
INSERT INTO postac VALUES(2,'Drozd','ptak','2019-7-14','2');
INSERT INTO postac VALUES(3,'Tesciowa','kobieta','1954-1-14','67');
UPDATE postac SET data_urodzenia='1933-1-12' WHERE nazwa='Tesciowa';

CREATE TABLE walizka(id_walizki INT PRIMARY KEY AUTO_INCREMENT, pojemnosc INT UNSIGNED, kolor ENUM('rozowy','czerwony','teczowy','zolty'), id_wlasciciela INT, FOREIGN KEY(id_wlasciciela) REFERENCES postac(id_postaci));
ALTER TABLE walizka MODIFY kolor ENUM('rozowy','czerwony','teczowy','zolty')  DEFAULT 'rozowy';
INSERT INTO walizka VALUES(1,20,'zolty',1);
INSERT INTO walizka VALUES(2,30,'rozowy',3);

CREATE TABLE izba(adres_budynku INT, nazwa_izby VARCHAR(40), PRIMARY KEY(adres_budynku, nazwa_izby), metraz INT UNSIGNED, wlasciciel INT, FOREIGN KEY (wlasciciel) REFERENCES postac(id_postaci) ON DELETE SET NULL);
ALTER TABLE izba ADD kolor VARCHAR(40) DEFAULT 'czarny' AFTER metraz;
INSERT INTO izba VALUES(1, 'spizarnia', 30, 'czarny', 1);

CREATE TABLE przetwory(id_przetworu INT PRIMARY KEY, rok_produkcji YEAR DEFAULT 1964, id_wykonawcy INT, FOREIGN KEY (id_wykonawcy) REFERENCES postac(id_postaci), zawartosc VARCHAR(40), dodatek VARCHAR(40) DEFAULT 'chilli', id_konsumenta INT, FOREIGN KEY (id_konsumenta) REFERENCES postac(id_postaci));
INSERT INTO przetwory VALUES(1, 1978, 1, 'bigos', 'chilli', 3);

INSERT INTO postac VALUES(4, 'Ragnar', 1, '1980-12-3', 41);
INSERT INTO postac VALUES(5, 'Floki', 1, '1980-11-3', 41);
INSERT INTO postac VALUES(6, 'Ivar', 1, '1980-10-3', 41);
INSERT INTO postac VALUES(7, 'Rollo', 1, '1980-9-3', 41);
INSERT INTO postac VALUES(8, 'Ubbe', 1, '1980-8-3', 41);

CREATE TABLE statek(nazwa_statku VARCHAR(60) PRIMARY KEY, rodzaj_statku ENUM ('wojenny','pasazerski','handlowy'), data_wodowania DATE, max_ladownosc INT UNSIGNED);
INSERT INTO statek VALUES('dar tesciowej', 'wojenny', '2015-7-12', 1000);
INSERT INTO statek VALUES('boruta', 'pasazerski', '2013-7-12', 1500);

ALTER TABLE postac ADD funkcja VARCHAR(40);

UPDATE postac SET funkcja='kapitan' WHERE nazwa='Bjorn';

ALTER TABLE postac ADD n_statek VARCHAR(60), ADD FOREIGN KEY (n_statek) REFERENCES statek(nazwa_statku);

UPDATE postac SET n_statek='dar tesciowej' WHERE nazwa='Bjorn';
UPDATE postac SET n_statek='dar tesciowej' WHERE nazwa='Drozd';
UPDATE postac SET n_statek='dar tesciowej' WHERE nazwa='Floki';
UPDATE postac SET n_statek='dar tesciowej' WHERE nazwa='Ivar';
UPDATE postac SET n_statek='dar tesciowej' WHERE nazwa='Rollo';
UPDATE postac SET n_statek='dar tesciowej' WHERE nazwa='Ubbe';

DELETE FROM izba WHERE nazwa_izby='spizarnia';

DROP TABLE izba;
